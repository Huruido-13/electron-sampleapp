<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <title>Sample App</title>
</head>
<body>
    <nav class="navbar bg-primary mg-4">
        <h1 class="display-4 text-light">Sample-app</h1>
    </nav>
    <div class="container">
        <p id="msg">Please click button</p>
        <button class="btn btn-primary" onclick="doit()">
            Click
        </button>
    </div>
    <script>
        const BrowserWindow = window.remote.BrowserWindow;
        const Menu = window.remote.Menu;
        const MenuItem = window.remote.MenuItem;
        
        let menu_temp = [
            {
                label:"Hello",click(m,w){
                    console.log("Hello menu");
                    alert("Hellllllllllo! ID:" + w.id );
                }
            },
            {type:"separator"},
            {role:"cut"},
            {role:"copy"},
            {role:"paste"}
        ];

        const menu = Menu.buildFromTemplate(menu_temp);

        window.addEventListener("contextmenu", (e) => {
            menu.popup({window: remote.getCurrentWindow()})
        }, false);

        function doit(){
            let menu_temp = [
                {
                    label:'New Menu',
                    submenu:[
                        {label:'New', click:() => {
                            console.log('New menu');
                            createWindow();
                        }},
                        {label:"Hello", click:() =>{
                            hello();
                        }},
                        {role: 'close'},
                        {role: 'separetor'},
                        {role:'quit'}
                    ]
                }];
                let menu = Menu.buildFromTemplate(menu_temp);
                Menu.setApplicationMenu(menu);
                alert('change menubar!');
            };
        function hello(){
            alert('select menu' + remote.getCurrentWindow().id);
        }

    </script>
</body>
</html>